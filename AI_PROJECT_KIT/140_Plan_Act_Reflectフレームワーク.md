# Plan–Act–Reflect フレームワーク

目的：AIとの作業を"雑な対話"から"構造化されたループ"に変える。

## 概要

- **Plan**（計画）：何をどう変えるか、AIに計画を出させる
- **Act**（実行）：小さく刻んで実装→検証
- **Reflect**（振り返り）：うまくいった/いかなかった→ルール更新

## 1. Plan（計画）★最重要★

### 原則：複数案提示→ユーザー承認→実装

- AIは**最低2〜3案**を出す
- 各案の**メリット/デメリット/リスク**を比較
- ユーザーが承認するまで実装に入らない

### プロンプト例（複数案版）

```text
このタスクを進める前に、まず計画を提示して。

出力形式：
## 案A：<タイトル>
- 概要：
- 変更ファイル候補：
- 実装ステップ（3〜6）：
- メリット：
- デメリット：
- リスク：
- 検証方法：
- 見積もり：大/中/小

## 案B：<タイトル>
...

## 案C：<タイトル>（あれば）
...

## 推奨案と理由

私が案を選択または修正指示を出すまで、実装には入らないでください。
```

### なぜ複数案か

- 1案だけだと「本当にそれがベストか」判断できない
- 比較することで設計判断の質が上がる
- ADR（決定ログ）に「採用しなかった案」も残せる

## 2. Act（実行）

### 進め方

- 計画を承認したら、ステップ1から順に実装
- 1ステップごとに検証（lint/typecheck/test）
- 赤が出たら原因→修正→再実行
- 差分が大きくなったら PR を分割

### プロンプト例

```text
計画に沿ってステップ1を実装して。
完了したら検証コマンドを実行し、結果を報告して。
赤なら原因と修正案を出して。
```

## 3. Reflect（振り返り）

### 作業終了時に必ず聞く

```text
この作業で得た学びをまとめて。

出力：
- うまくいったこと（再利用できるプロンプト/手順）
- つまずいたこと（原因）
- 次に活かす改善

さらに、改善を「どのファイルに追記すべきか」を提案して（10/60/90/100）。
```

## 4. このループを毎タスクで回す

1. Task Brief を渡す
2. AI に Plan を出させる
3. Plan を承認
4. AI が Act（小刻みに実行→検証）
5. 完了後 Reflect
6. Reflectの内容を文書に固定（ルール更新）

## 補足：Plan–Act–Reflect の効果

- 事故が減る（計画段階でリスクを洗い出す）
- 品質が上がる（小刻みに検証）
- 資産が増える（学びを文書化）

