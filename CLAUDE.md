## コーディング規約

### 命名規則
- **クラス名**: PascalCase（例: `CharacterPerformanceManager`）
- **メソッド名**: PascalCase（例: `ProcessUserInput`）
- **変数名**: camelCase（例: `isStreaming`）
- **定数**: UPPER_SNAKE_CASE（例: `MAX_MESSAGE_LENGTH`）
- **インターフェース**: `I`プレフィックス（例: `IAIService`）

### 必須ルール
1. **名前空間の使用禁止**
   - すべてのクラスはグローバルスコープに配置
   - using文でnamespaceを参照しない（System等の標準ライブラリは除く）
   - 既存のnamespace宣言は削除する

2. **ドキュメント作成の制限**
   - 新しいMarkdownドキュメント（.md）を作成しない
   - ユーザーが明示的に要求した場合のみドキュメントを作成
   - 実装の説明はコード内のコメントで十分
   - 既存のドキュメントへの追記は可能

### コード品質ルール
1. **Pure C#実装の優先**: ビジネスロジックは可能な限りMonoBehaviourに依存しないPure C#で実装
2. **依存性注入パターン**: 少数のMonoBehaviourから統合的に依存性を注入
3. **インターフェース分離**: すべてのサービスはインターフェースを定義
4. **コンストラクタインジェクション**: 設定やサービスはコンストラクタで注入

5. **Find系メソッドの使用禁止**
   - GameObject.Find、FindObjectOfType等の検索系メソッドは使用しない
   - MonoBehaviourの場合: インスペクターでの直接参照設定を必須とする
   - Pure C#の場合: コンストラクタまたはメソッドパラメータでの注入を必須とする
   - 例外: システム初期化時の一回限りの検索のみ許可（要コメント明記）

6. **エラーハンドリング**: try-catchとログ出力を徹底
7. **非同期処理**: UniTaskを使用した適切な処理

8. **コード整形ルール**
   - #region/#endregionディレクティブは使用しない
   - コードの構造化はクラス分割やメソッド分割で行う
   - 既存の#region/#endregionは削除する

9. **文字制限**
   - 絵文字を使用しない（コメント、文字列、変数名等）
   - ユーザーが明示的に要求した場合のみ例外とする
   - 既存コードに含まれる絵文字は削除する

10. **ログ出力の最適化**
    - 重要なイベント（初期化、エラー、状態変更）のみログ出力
    - デバッグ用の詳細ログは条件付きコンパイル（#if UNITY_EDITOR）で囲む
    - ループ内でのログ出力は避ける
    - ログメッセージは簡潔に
    - 一時的なデバッグログは作業完了後に削除

### フォルダ・ファイル管理
- **番号プレフィックス**: 重要度に応じて番号プレフィックスで整理（00-99）
- **機能別グループ化**: 関連機能をフォルダで分類
- **Legacyコード**: 旧コードは`99 Legacy`に配置
- **APIキーの管理**: 絶対にコミットしない（.gitignoreで除外）

### リファクタリング時の削除ルール
- 使用されなくなったファイル（.cs、.meta含む）は完全削除
- 不要になったプロパティ、メソッド、クラスを削除
- 古いインターフェース実装を削除
- 参照されていない設定項目を削除
- 未使用のusing文を削除
- 段階的移行は避け、完全に置き換える
- 削除前にgrep検索で参照がないことを確認
- .csファイル削除時は対応する.metaファイルも削除

## Git管理・ブランチ戦略

### ブランチ運用
1. **develop**: 全ての開発作業はこのブランチで実施
2. **main**: 動作確認済みのコードのみマージ
3. **archive/**: 過去バージョンのアーカイブ用
4. **feature/**: 大規模な機能開発用（オプション）

### コミットルール
1. **作業完了時の必須手順**:
   ```bash
   git add .
   git commit -m "適切なコミットメッセージ"
   git push origin develop
   ```

2. **コミットメッセージ形式**:
   ```
   <type>: <description>
   ```
   
   **タイプ一覧**:
   - `feat`: 新機能追加
   - `fix`: バグ修正
   - `refactor`: リファクタリング
   - `docs`: ドキュメント更新
   - `style`: コードフォーマット
   - `test`: テスト追加・修正
   - `chore`: ビルド・設定変更

3. **プッシュタイミング**: 作業セッション終了時は必ずプッシュ

### タスク完了時の報告ルール
- **必須**: タスク完了後は3行要約で結論ややったことを記載する
- **形式**: 簡潔に実施内容、結果、影響を明記
- **目的**: 作業内容の可視化と次回作業時の参考情報提供

### コメント・ドキュメント規約
- **日本語コメント**: コメントは日本語で記述
- **HeaderAttribute**: Unity Inspectorで設定をグループ化
- **TooltipAttribute**: 設定項目に説明を追加
- **XMLドキュメント**: パブリックメンバーには適切な説明を追加